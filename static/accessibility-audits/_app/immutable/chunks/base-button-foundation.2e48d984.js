import{l,m as v,c as d,_ as a,B as k,g as _}from"./base-component.2bf7bdb1.js";import{c as L}from"./index.0222c5a0.js";import{c as I}from"./icon.95b4e283.js";import{F as h,B as O}from"./base-adapter.318bc5f7.js";import{F as P,S}from"./focus-indicator-constants.5b1bf6ad.js";import{a as y}from"./dom-utils.0d2549ce.js";/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */function C(){return HTMLElement.prototype.hasOwnProperty("popover")}/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 *//**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *
 * Adapted and influenced from [Material Web](https://github.com/material-components/material-web).
 * The original source code can be found at: [GitHub](https://github.com/material-components/material-web/blob/main/labs/behaviors/focusable.ts)
 */const E=Symbol("privateIsFocusable"),p=Symbol("externalTabIndex"),m=Symbol("isUpdatingTabIndex"),A=Symbol("updateTabIndex");function w(c){var t,e,o;class r extends c{constructor(){super(...arguments),this[t]=!1,this[e]=null,this[o]=!1}get[l](){return this[E]}set[l](i){this[l]!==i&&(this[E]=i,this[A]())}connectedCallback(){var i;(i=super.connectedCallback)===null||i===void 0||i.call(this),this[l]=!0}attributeChangedCallback(i,b,f){var g;if((g=super.attributeChangedCallback)===null||g===void 0||g.call(this,i,b,f),!(i!=="tabindex"||this[m])){if(!this.hasAttribute("tabindex")){this[p]=null,this[A]();return}this[p]=this.tabIndex}}[(t=E,e=p,o=m,A)](){var i;const b=this[l]?0:-1,f=(i=this[p])!==null&&i!==void 0?i:b;this[m]=!0,this.tabIndex=f,this[m]=!1}}return r}/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */function H(c){class t extends c{}return t}/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const N=["name","value","formaction","formenctype","formmethod","formnovalidate","formtarget"];function B(c,t,e){e.forEach(o=>{const r=c.getAttribute(o);r!==null&&t.setAttribute(o,r)})}/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const T={TYPE:"type",DISABLED:"disabled",POPOVER_ICON:"popover-icon",ANCHOR:"anchor",HREF:"href",TARGET:"target",DOWNLOAD:"download",REL:"rel",DENSE:"dense",TABINDEX:"tabindex"},x=Object.assign({},T),R={ROOT:"forge-button",POPOVER_ICON:"forge-button__popover-icon"},D={ROOT:"[part=root]",END_SLOT:"slot[name=end]"},s={observedAttributes:T,attributes:x,selectors:D,classes:R};/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const F=H(w(k));class n extends F{constructor(){super(),I.define(L),this[v]=this.attachInternals()}connectedCallback(){super.connectedCallback(),this._foundation.initialize()}attributeChangedCallback(t,e,o){switch(t){case s.observedAttributes.TYPE:this.type=o;break;case s.observedAttributes.DISABLED:this.disabled=d(o);break;case s.observedAttributes.POPOVER_ICON:this.popoverIcon=d(o);break;case s.observedAttributes.ANCHOR:this.anchor=d(o);break;case s.observedAttributes.HREF:this.href=o;break;case s.observedAttributes.TARGET:this.target=o;break;case s.observedAttributes.DOWNLOAD:this.download=o;break;case s.observedAttributes.REL:this.rel=o;break;case s.observedAttributes.DENSE:this.dense=d(o);break}super.attributeChangedCallback(t,e,o)}labelClickedCallback(){this._foundation.click({animateStateLayer:!0})}labelChangedCallback(t){this._foundation.proxyLabel(t)}get form(){return this[v].form}get name(){var t;return(t=this.getAttribute("name"))!==null&&t!==void 0?t:""}set name(t){this.setAttribute("name",t)}get value(){var t;return(t=this.getAttribute("value"))!==null&&t!==void 0?t:""}set value(t){this.setAttribute("value",t)}click(){this._foundation.click({animateStateLayer:!0})}focus(t){this._foundation.focus(t)}}n.formAssociated=!0;a([h()],n.prototype,"type",void 0);a([h()],n.prototype,"disabled",void 0);a([h()],n.prototype,"popoverIcon",void 0);a([h()],n.prototype,"anchor",void 0);a([h()],n.prototype,"href",void 0);a([h()],n.prototype,"target",void 0);a([h()],n.prototype,"download",void 0);a([h()],n.prototype,"rel",void 0);a([h()],n.prototype,"dense",void 0);/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class G extends O{constructor(t){super(t),this._rootElement=_(this._component,s.selectors.ROOT),this._focusIndicatorElement=_(this._component,P.elementName),this._stateLayerElement=_(this._component,S.elementName),this._endSlotElement=_(this._component,s.selectors.END_SLOT)}initialize(){this._applyHostSemantics()}initializeAnchor(){this._anchorElement=this._createAnchorRootElement(),this._rootElement.insertAdjacentElement("afterend",this._anchorElement),this._applyHostSemantics()}removeAnchor(){var t;(t=this._anchorElement)===null||t===void 0||t.remove(),this._anchorElement=void 0,this._applyHostSemantics()}setAnchorProperty(t,e){this._anchorElement&&(this._anchorElement[t]=e)}setDisabled(t){if(this._anchorElement){this.hasHostAttribute("aria-disabled")&&this.removeHostAttribute("aria-disabled"),this._focusIndicatorElement.isConnected||this._rootElement.append(this._focusIndicatorElement),this._stateLayerElement.isConnected||(this._stateLayerElement.disabled&&(this._stateLayerElement.disabled=!1),this._rootElement.append(this._stateLayerElement));return}t?(this._focusIndicatorElement.remove(),this._stateLayerElement.remove()):this._rootElement.append(this._focusIndicatorElement,this._stateLayerElement),this._component[l]=!t,y(this._component,t,"aria-disabled","true")}clickAnchor(){var t;(t=this._anchorElement)===null||t===void 0||t.click()}clickHost(){HTMLElement.prototype.click.call(this._component)}forceFocusVisible(){this._focusIndicatorElement.active=!0}clickFormButton(t){var e;if(this._component.form)if(t==="submit"){this._component[v].setFormValue(this._component.value);const o=document.createElement("button");o.type=t,B(this._component,o,N),this._component.form.addEventListener("submit",r=>{Object.defineProperty(r,"submitter",{configurable:!0,enumerable:!0,get:()=>this._component})},{capture:!0,once:!0}),this._component.insertAdjacentElement("afterend",o),o.click(),o.remove()}else t==="reset"&&((e=this._component.form)===null||e===void 0||e.reset())}addAnchorEventListener(t,e){this._rootElement.addEventListener(t,e)}removeAnchorEventListener(t,e){this._rootElement.removeEventListener(t,e)}hasPopoverTarget(){return this._component.hasAttribute("popovertarget")||!!this._component.popoverTargetElement}managePopover(){if(this._component.form||!this.hasPopoverTarget()||!C())return!1;const t=this._locatePopoverTargetElement();if(!t)return!1;const e=this._component.getAttribute("popovertargetaction")||"toggle",o=t.matches(":popover-open");switch(e){case"show":return o||t.showPopover(),!0;case"hide":return o&&t.hidePopover(),!1;case"toggle":default:const r=t.togglePopover();if(r&&t.popover!=="manual"){const u=i=>{i.stopPropagation(),t.matches(":popover-open")&&t.hidePopover()};this._component.addEventListener("click",u,{capture:!0,once:!0}),t.addEventListener("beforetoggle",async()=>{await new Promise(i=>setTimeout(i)),this._component.removeEventListener("click",u,{capture:!0})},{once:!0})}return r}}toggleDefaultPopoverIcon(t){if(t){if(!this._endSlotElement.querySelector("forge-icon")){const o=document.createElement("forge-icon");o.classList.add(s.classes.POPOVER_ICON),o.name=L.name,this._endSlotElement.append(o)}}else{const e=this._endSlotElement.querySelector("forge-icon");e==null||e.remove()}}animateStateLayer(){var t;this._stateLayerElement.disabled||(t=this._stateLayerElement)===null||t===void 0||t.playAnimation()}proxyLabel(t){var e;this._labelAwareText=t??void 0;const o=this._component.hasAttribute("aria-label")||!!this._labelAwareText;y(this._component,o,"aria-label",(e=this._component.getAttribute("aria-label"))!==null&&e!==void 0?e:this._labelAwareText)}_locatePopoverTargetElement(){var t;let e=(t=this._component.popoverTargetElement)!==null&&t!==void 0?t:null;if(!e){const o=this._component.ownerDocument.getRootNode();if(!o)return null;const r=this._component.getAttribute("popovertarget");e=o.querySelector(`#${r}`)}return e}_applyHostSemantics(){const t=this._component.getAttribute("role");(!t||["button","link"].includes(t))&&(this._component.role=this._anchorElement?"link":"button"),this._component[l]=!!this._anchorElement||!this._component.disabled}_createAnchorRootElement(){const t=document.createElement("a");return t.setAttribute("aria-hidden","true"),t.tabIndex=-1,this._component.href&&(t.href=this._component.href),this._component.target&&(t.target=this._component.target),this._component.download&&(t.download=this._component.download),this._component.rel&&(t.rel=this._component.rel),t}}/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class M{constructor(t){this._adapter=t,this._type="button",this._disabled=!1,this._popoverIcon=!1,this._anchor=!1,this._href="",this._target="",this._download="",this._rel="",this._dense=!1,this._clickListener=e=>this._onClick(e),this._keydownListener=e=>this._onKeydown(e),this._anchorFocusListener=()=>this._adapter.focusHost(),this._adapter.addHostListener("keydown",this._keydownListener)}initialize(){this._adapter.initialize(),this._anchor?this._adapter.addAnchorEventListener("focus",this._anchorFocusListener):this._adapter.addHostListener("click",this._clickListener)}click({animateStateLayer:t=!1}={}){this._disabled||(this._anchor?this._adapter.clickAnchor():this._adapter.clickHost(),t&&this._adapter.animateStateLayer())}focus(t){this._adapter.focusHost(t),t!=null&&t.focusVisible&&this._adapter.forceFocusVisible()}proxyLabel(t){this._adapter.proxyLabel(t)}async _onClick(t){const e=this._type==="submit"||this._type==="reset";!e&&this._adapter.hasPopoverTarget()&&this._adapter.managePopover()||(await new Promise(o=>setTimeout(o)),!(t.defaultPrevented||this._disabled)&&e&&this._adapter.clickFormButton(this._type))}async _onKeydown(t){if(t.key===" "&&!this._anchor){t.preventDefault(),this.click();return}await new Promise(e=>setTimeout(e)),!(t.defaultPrevented||this._disabled)&&t.key==="Enter"&&(this._anchor?this._adapter.clickAnchor():this.click())}_toggleAnchor(){this._anchor?(this._adapter.initializeAnchor(),this._manageAnchorListeners(),this.disabled=!1):(this._adapter.removeAnchor(),this._manageAnchorListeners())}_manageAnchorListeners(){this._anchor?(this._adapter.removeHostListener("click",this._clickListener),this._adapter.addAnchorEventListener("focus",this._anchorFocusListener)):(this._adapter.addHostListener("click",this._clickListener),this._adapter.removeAnchorEventListener("focus",this._anchorFocusListener))}get type(){return this._type}set type(t){this._type!==t&&(this._type=t,this._adapter.setHostAttribute(s.attributes.TYPE,t))}get disabled(){return this._disabled}set disabled(t){t=!!t,this._disabled!==t&&(this._anchor&&(t=!1),this._disabled=t,this._adapter.setDisabled(this._disabled),this._adapter.toggleHostAttribute(s.attributes.DISABLED,t))}get popoverIcon(){return this._popoverIcon}set popoverIcon(t){t=!!t,this._popoverIcon!==t&&(this._popoverIcon=t,this._adapter.toggleDefaultPopoverIcon(this._popoverIcon),this._adapter.toggleHostAttribute(s.attributes.POPOVER_ICON,t))}get anchor(){return this._anchor}set anchor(t){t=!!t,this._anchor!==t&&(this._anchor=t,this._toggleAnchor(),this._adapter.toggleHostAttribute(s.attributes.ANCHOR,t))}get href(){return this._href}set href(t){t=(t??"").trim(),this._href!==t&&(this._href=t,this.anchor=this._href.length>0,this._anchor&&this._adapter.setAnchorProperty("href",this._href),this._adapter.toggleHostAttribute(s.attributes.HREF,!!this._href,this._href))}get target(){return this._target}set target(t){this._target!==t&&(this._target=t??"_self",this._adapter.setAnchorProperty("target",t),this._adapter.toggleHostAttribute(s.attributes.TARGET,!!this._target,this._target))}get download(){return this._download}set download(t){this._download!==t&&(this._download=t,this._adapter.setAnchorProperty("download",this._download),this._adapter.toggleHostAttribute(s.attributes.DOWNLOAD,!!this._download,this._download))}get rel(){return this._rel}set rel(t){this._rel!==t&&(this._rel=t,this._adapter.setAnchorProperty("rel",this._rel),this._adapter.toggleHostAttribute(s.attributes.REL,!!this._rel,this._rel))}get dense(){return this._dense}set dense(t){t=!!t,this._dense!==t&&(this._dense=t,this._adapter.toggleHostAttribute(s.attributes.DENSE,t))}}export{G as B,M as a,n as b,s as c};
