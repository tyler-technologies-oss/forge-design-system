import{n as l,c as d,s as A,o as y,_ as a,B as I,g as _,l as O}from"./base-component.e899f709.js";import{c as L}from"./index.6fcde760.js";import{c as k}from"./icon.84015d2d.js";import{W as P,a as S}from"./with-default-aria.01666df3.js";import{F as h,B as C}from"./base-adapter.c4d08321.js";import{F as D,S as H}from"./focus-indicator-constants.6d2544fa.js";/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const N=["name","value","formaction","formenctype","formmethod","formnovalidate","formtarget"];function B(c,t,e){e.forEach(s=>{const r=c.getAttribute(s);r!==null&&t.setAttribute(s,r)})}/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 *//**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *
 * Adapted and influenced from [Material Web](https://github.com/material-components/material-web).
 * The original source code can be found at: [GitHub](https://github.com/material-components/material-web/blob/main/labs/behaviors/focusable.ts)
 */const E=Symbol("privateIsFocusable"),p=Symbol("externalTabIndex"),u=Symbol("isUpdatingTabIndex"),v=Symbol("updateTabIndex");function w(c){var t,e,s;class r extends c{constructor(){super(...arguments),this[t]=!1,this[e]=null,this[s]=!1}get[l](){return this[E]}set[l](i){this[l]!==i&&(this[E]=i,this[v]())}connectedCallback(){var i;(i=super.connectedCallback)===null||i===void 0||i.call(this),this[l]=!0}attributeChangedCallback(i,f,b){var g;if((g=super.attributeChangedCallback)===null||g===void 0||g.call(this,i,f,b),!(i!=="tabindex"||this[u])){if(!this.hasAttribute("tabindex")){this[p]=null,this[v]();return}this[p]=this.tabIndex}}[(t=E,e=p,s=u,v)](){var i;const f=this[l]?0:-1,b=(i=this[p])!==null&&i!==void 0?i:f;this[u]=!0,this.tabIndex=b,this[u]=!1}}return r}/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const T={TYPE:"type",DISABLED:"disabled",POPOVER_ICON:"popover-icon",ANCHOR:"anchor",HREF:"href",TARGET:"target",DOWNLOAD:"download",REL:"rel",DENSE:"dense",TABINDEX:"tabindex"},R=Object.assign({},T),F={ROOT:"forge-button",POPOVER_ICON:"forge-button__popover-icon"},x={ROOT:"[part=root]",END_SLOT:"slot[name=end]"},o={observedAttributes:T,attributes:R,selectors:x,classes:F};/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */function W(c){class t extends c{}return t}/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */const z=P(S(W(w(I))));class n extends z{static get observedAttributes(){return Object.values(o.observedAttributes)}constructor(){super(),k.define(L)}connectedCallback(){super.connectedCallback(),this._foundation.initialize()}attributeChangedCallback(t,e,s){switch(t){case o.observedAttributes.TYPE:this.type=s;return;case o.observedAttributes.DISABLED:this.disabled=d(s);return;case o.observedAttributes.POPOVER_ICON:this.popoverIcon=d(s);return;case o.observedAttributes.ANCHOR:this.anchor=d(s);return;case o.observedAttributes.HREF:this.href=s;return;case o.observedAttributes.TARGET:this.target=s;return;case o.observedAttributes.DOWNLOAD:this.download=s;return;case o.observedAttributes.REL:this.rel=s;return;case o.observedAttributes.DENSE:this.dense=d(s);return}super.attributeChangedCallback(t,e,s)}labelClickedCallback(){this._foundation.click({animateStateLayer:!0})}labelChangedCallback(t){this[A]({ariaLabel:t},{setAttribute:!this.hasAttribute("aria-label")})}get form(){return this[y].form}get name(){var t;return(t=this.getAttribute("name"))!==null&&t!==void 0?t:""}set name(t){this.setAttribute("name",t)}get value(){var t;return(t=this.getAttribute("value"))!==null&&t!==void 0?t:""}set value(t){this.setAttribute("value",t)}click(){this._foundation.click({animateStateLayer:!0})}focus(t){this._foundation.focus(t)}}n.formAssociated=!0;a([h()],n.prototype,"type",void 0);a([h()],n.prototype,"disabled",void 0);a([h()],n.prototype,"popoverIcon",void 0);a([h()],n.prototype,"anchor",void 0);a([h()],n.prototype,"href",void 0);a([h()],n.prototype,"target",void 0);a([h()],n.prototype,"download",void 0);a([h()],n.prototype,"rel",void 0);a([h()],n.prototype,"dense",void 0);/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class M extends C{constructor(t){super(t),this._rootElement=_(this._component,o.selectors.ROOT),this._focusIndicatorElement=_(this._component,D.elementName),this._stateLayerElement=_(this._component,H.elementName),this._endSlotElement=_(this._component,o.selectors.END_SLOT)}initialize(){this._applyHostSemantics()}initializeAnchor(){this._anchorElement=this._createAnchorRootElement(),this._rootElement.insertAdjacentElement("afterend",this._anchorElement),this._applyHostSemantics()}removeAnchor(){var t;(t=this._anchorElement)===null||t===void 0||t.remove(),this._anchorElement=void 0,this._applyHostSemantics()}setAnchorProperty(t,e){this._anchorElement&&(this._anchorElement[t]=e)}setDisabled(t){if(this._anchorElement){this.hasHostAttribute("aria-disabled")&&this.removeHostAttribute("aria-disabled"),this._focusIndicatorElement.isConnected||this._rootElement.append(this._focusIndicatorElement),this._stateLayerElement.isConnected||(this._stateLayerElement.disabled&&(this._stateLayerElement.disabled=!1),this._rootElement.append(this._stateLayerElement));return}t?(this._focusIndicatorElement.remove(),this._stateLayerElement.remove()):this._rootElement.append(this._focusIndicatorElement,this._stateLayerElement),this._component[l]=!t,this._component[A]({ariaDisabled:t?"true":null})}clickAnchor(){var t;(t=this._anchorElement)===null||t===void 0||t.click()}clickHost(){HTMLElement.prototype.click.call(this._component)}forceFocusVisible(){this._focusIndicatorElement.active=!0}clickFormButton(t){var e;if(this._component.form)if(t==="submit"){this._component[y].setFormValue(this._component.value);const s=document.createElement("button");s.type=t,B(this._component,s,N),this._component.form.addEventListener("submit",r=>{Object.defineProperty(r,"submitter",{configurable:!0,enumerable:!0,get:()=>this._component})},{capture:!0,once:!0}),this._component.insertAdjacentElement("afterend",s),s.click(),s.remove()}else t==="reset"&&((e=this._component.form)===null||e===void 0||e.reset())}addAnchorEventListener(t,e){this._rootElement.addEventListener(t,e)}removeAnchorEventListener(t,e){this._rootElement.removeEventListener(t,e)}hasPopoverTarget(){return this._component.hasAttribute("popovertarget")||!!this._component.popoverTargetElement}managePopover(){if(this._component.form||!this.hasPopoverTarget()||!O())return!1;const t=this._locatePopoverTargetElement();if(!t)return!1;const e=this._component.getAttribute("popovertargetaction")||"toggle",s=t.matches(":popover-open");switch(e){case"show":return s||t.showPopover(),!0;case"hide":return s&&t.hidePopover(),!1;case"toggle":default:const r=t.togglePopover();if(r&&t.popover!=="manual"){const m=i=>{i.stopPropagation(),t.matches(":popover-open")&&t.hidePopover()};this._component.addEventListener("click",m,{capture:!0,once:!0}),t.addEventListener("beforetoggle",async()=>{await new Promise(i=>setTimeout(i)),this._component.removeEventListener("click",m,{capture:!0})},{once:!0})}return r}}toggleDefaultPopoverIcon(t){if(t){if(!this._endSlotElement.querySelector("forge-icon")){const s=document.createElement("forge-icon");s.classList.add(o.classes.POPOVER_ICON),s.name=L.name,this._endSlotElement.append(s)}}else{const e=this._endSlotElement.querySelector("forge-icon");e==null||e.remove()}}animateStateLayer(){var t;this._stateLayerElement.disabled||(t=this._stateLayerElement)===null||t===void 0||t.playAnimation()}_locatePopoverTargetElement(){var t;let e=(t=this._component.popoverTargetElement)!==null&&t!==void 0?t:null;if(!e){const s=this._component.ownerDocument.getRootNode();if(!s)return null;const r=this._component.getAttribute("popovertarget");e=s.querySelector(`#${r}`)}return e}_applyHostSemantics(){const t=this._component.getAttribute("role"),e=!t||["button","link"].includes(t);this._component[A]({role:this._anchorElement?"link":"button"},{setAttribute:e}),this._component[l]=!!this._anchorElement||!this._component.disabled}_createAnchorRootElement(){const t=document.createElement("a");return t.setAttribute("aria-hidden","true"),t.tabIndex=-1,this._component.href&&(t.href=this._component.href),this._component.target&&(t.target=this._component.target),this._component.download&&(t.download=this._component.download),this._component.rel&&(t.rel=this._component.rel),t}}/**
 * @license
 * Copyright 2023 Tyler Technologies, Inc. 
 * License: Apache-2.0
 */class X{constructor(t){this._adapter=t,this._type="button",this._disabled=!1,this._popoverIcon=!1,this._anchor=!1,this._href="",this._target="",this._download="",this._rel="",this._dense=!1,this._clickListener=e=>this._onClick(e),this._keydownListener=e=>this._onKeydown(e),this._anchorFocusListener=()=>this._adapter.focusHost(),this._adapter.addHostListener("keydown",this._keydownListener)}initialize(){this._adapter.initialize(),this._anchor?this._adapter.addAnchorEventListener("focus",this._anchorFocusListener):this._adapter.addHostListener("click",this._clickListener)}click({animateStateLayer:t=!1}={}){this._disabled||(this._anchor?this._adapter.clickAnchor():this._adapter.clickHost(),t&&this._adapter.animateStateLayer())}focus(t){this._adapter.focusHost(t),(t==null?void 0:t.focusVisible)!==!1&&this._adapter.forceFocusVisible()}async _onClick(t){const e=this._type==="submit"||this._type==="reset";!e&&this._adapter.hasPopoverTarget()&&this._adapter.managePopover()||(await new Promise(s=>setTimeout(s)),!(t.defaultPrevented||this._disabled)&&e&&this._adapter.clickFormButton(this._type))}async _onKeydown(t){if(t.key===" "&&!this._anchor){t.preventDefault(),this.click();return}await new Promise(e=>setTimeout(e)),!(t.defaultPrevented||this._disabled)&&t.key==="Enter"&&(this._anchor?this._adapter.clickAnchor():this.click())}_toggleAnchor(){this._anchor?(this._adapter.initializeAnchor(),this._manageAnchorListeners(),this.disabled=!1):(this._adapter.removeAnchor(),this._manageAnchorListeners())}_manageAnchorListeners(){this._anchor?(this._adapter.removeHostListener("click",this._clickListener),this._adapter.addAnchorEventListener("focus",this._anchorFocusListener)):(this._adapter.addHostListener("click",this._clickListener),this._adapter.removeAnchorEventListener("focus",this._anchorFocusListener))}get type(){return this._type}set type(t){this._type!==t&&(this._type=t,this._adapter.setHostAttribute(o.attributes.TYPE,t))}get disabled(){return this._disabled}set disabled(t){t=!!t,this._disabled!==t&&(this._anchor&&(t=!1),this._disabled=t,this._adapter.setDisabled(this._disabled),this._adapter.toggleHostAttribute(o.attributes.DISABLED,t))}get popoverIcon(){return this._popoverIcon}set popoverIcon(t){t=!!t,this._popoverIcon!==t&&(this._popoverIcon=t,this._adapter.toggleDefaultPopoverIcon(this._popoverIcon),this._adapter.toggleHostAttribute(o.attributes.POPOVER_ICON,t))}get anchor(){return this._anchor}set anchor(t){t=!!t,this._anchor!==t&&(this._anchor=t,this._toggleAnchor(),this._adapter.toggleHostAttribute(o.attributes.ANCHOR,t))}get href(){return this._href}set href(t){t=(t??"").trim(),this._href!==t&&(this._href=t,this.anchor=this._href.length>0,this._anchor&&this._adapter.setAnchorProperty("href",this._href),this._adapter.toggleHostAttribute(o.attributes.HREF,!!this._href,this._href))}get target(){return this._target}set target(t){this._target!==t&&(this._target=t??"_self",this._adapter.setAnchorProperty("target",t),this._adapter.toggleHostAttribute(o.attributes.TARGET,!!this._target,this._target))}get download(){return this._download}set download(t){this._download!==t&&(this._download=t,this._adapter.setAnchorProperty("download",this._download),this._adapter.toggleHostAttribute(o.attributes.DOWNLOAD,!!this._download,this._download))}get rel(){return this._rel}set rel(t){this._rel!==t&&(this._rel=t,this._adapter.setAnchorProperty("rel",this._rel),this._adapter.toggleHostAttribute(o.attributes.REL,!!this._rel,this._rel))}get dense(){return this._dense}set dense(t){t=!!t,this._dense!==t&&(this._dense=t,this._adapter.toggleHostAttribute(o.attributes.DENSE,t))}}export{M as B,X as a,n as b,o as c};
