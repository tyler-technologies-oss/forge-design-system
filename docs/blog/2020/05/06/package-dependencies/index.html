<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Forge and package dependencies | Forge</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://forge.tylertech.com/blog/2020/05/06/package-dependencies"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Forge and package dependencies | Forge"><meta data-rh="true" name="description" content="In order to optimize Forge use, teams should avoid creating libraries from Forge components and should ensure that the components are kept up to date."><meta data-rh="true" property="og:description" content="In order to optimize Forge use, teams should avoid creating libraries from Forge components and should ensure that the components are kept up to date."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2020-05-06T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/Ross-Blakeney"><meta data-rh="true" property="article:tag" content="tcw,forge,components,npm"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://forge.tylertech.com/blog/2020/05/06/package-dependencies"><link data-rh="true" rel="alternate" href="https://forge.tylertech.com/blog/2020/05/06/package-dependencies" hreflang="en"><link data-rh="true" rel="alternate" href="https://forge.tylertech.com/blog/2020/05/06/package-dependencies" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Forge RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Forge Atom Feed">






<link rel="stylesheet" href="https://cdn.forge.tylertech.com/v1/css/tyler-font.css">
<link rel="stylesheet" href="https://cdn.forge.tylertech.com/v1/css/tyler-icons-standard.css">
<link rel="stylesheet" href="https://cdn.forge.tylertech.com/v1/css/tyler-icons-extended.css"><link rel="stylesheet" href="/assets/css/styles.5814bf15.css">
<link rel="preload" href="/assets/js/runtime~main.31aec36f.js" as="script">
<link rel="preload" href="/assets/js/main.bfc6b0e5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://cdn.forge.tylertech.com/v1/icons/svg/custom/forge_logo.svg" alt="Forge logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://cdn.forge.tylertech.com/v1/icons/svg/custom/forge_logo.svg" alt="Forge logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Forge</b></a><a class="navbar__item navbar__link" href="/core">Core</a><a class="navbar__item navbar__link" href="/styles">Styles</a><a class="navbar__item navbar__link" href="/content">Content</a><a class="navbar__item navbar__link" href="/assets">Assets</a><a class="navbar__item navbar__link" href="/components">Components</a><a class="navbar__item navbar__link" href="/patterns">Patterns</a><a class="navbar__item navbar__link" href="/recipes">Recipes</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Develop</a><ul class="dropdown__menu"><li class="dropdown-group-header"><b>Current</b></li><li><a href="https://forge.tylerdev.io/" target="_blank" class="dropdown__link">Forge 2.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://animated-doodle-7c7696e9.pages.github.io/main/" target="_blank" class="dropdown__link">Forge 2.x (internal)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr class="dropdown-separator"></li><li class="dropdown-group-header"><b>Legacy</b></li><li><a href="https://vigilant-potato-ad3164a4.pages.github.io/" target="_blank" class="dropdown__link">TCW 1.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div><a href="https://github.com/tyler-technologies-oss/forge-design-system/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/04/forge-website-redesign">Forge Website Redesign</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/02/upgrade-guide-forge-2">Forge 2.0 Upgrade</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2020/05/06/package-dependencies">Forge and package dependencies</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Forge and package dependencies</h1><div class="container_mt6G margin-vert--md"><time datetime="2020-05-06T00:00:00.000Z" itemprop="datePublished">May 6, 2020</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/Ross-Blakeney" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/Ross-Blakeney.png" alt="Ross Blakeney"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Ross-Blakeney" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Ross Blakeney</span></a></div><small class="avatar__subtitle" itemprop="description">Lead Software Engineer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>In order to optimize Forge use, teams should avoid creating libraries from Forge components and should ensure that the components are kept up to date. </p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>TL;DR</div><div class="admonitionContent_S0QG"><ul><li>Never set Forge as a dependency of a package. Set Forge as a peer dependency only.</li><li>Always keep Forge within the same major version in all your apps and packages.</li></ul><p>It&#x27;s worth noting that this concept applies to <strong>any</strong> package that you want as a dependency of your library, but you want to allow for the consumer/dependent to control the version for compatibility with multiple versions of the library in question.</p></div></div><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h2><p><strong>Never list Forge in the <code>dependencies</code> array for your own library package. Use <code>peerDependencies</code> instead.</strong></p><p>There are a few key points we need to review.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="npm-jargon">NPM jargon<a class="hash-link" href="#npm-jargon" title="Direct link to heading">​</a></h3><ul><li>Package - any npm package. Typically, a library.</li><li>Dependency - an external package that will be <em>copied into your package</em> at the version you specify in the <code>package.json</code>.</li><li>Peer dependency - an external package that must be <em>provided by the dependent</em>.<ul><li>A peer dependency is <em>not</em> copied into your package.</li><li>The application that your package is included in <strong>must</strong> provide the peer dependency.</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="custom-elements">Custom elements<a class="hash-link" href="#custom-elements" title="Direct link to heading">​</a></h3><ul><li>Custom elements are one of the three main pieces of what makes up a Web Component. Web components are at the core of Forge.</li><li>The <code>CustomElementRegistry</code> is a dictionary (useful oversimplification) of all of the custom elements registered in the browser. The custom element’s name acts as the key, and the <code>class</code> is the value.<ul><li>All keys/element names must be unique.</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-not-to-do">What not to do<a class="hash-link" href="#what-not-to-do" title="Direct link to heading">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Let’s say you created a new library package to use across a few of your apps. We’ll call it <code>fooLib</code>. In this example, <code>fooLib</code> declares <code>Forge v2.0.0</code> as a dependency. So <code>Forge v2.0.0</code> is <em>copied</em> into <code>fooLib</code>.</p><p>In your app, <code>barApp</code>, you declare <code>Forge v3.5.0</code> as a dependency. <code>barApp</code> also declares <code>fooLib</code> as a dependency.</p><p>This results in Forge being included in your app <em>twice</em>. Once for your app at <code>v2.0.0</code> and once for your library at <code>v3.5.0</code>.</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="why-its-a-problem">Why it’s a problem<a class="hash-link" href="#why-its-a-problem" title="Direct link to heading">​</a></h3><p>There are several reasons you wouldn’t want to do this. First of all, your application is needlessly bloated by including Forge twice. But that is outside the scope of this document. We’ll focus on the issue this causes with custom elements.</p><p>Since <code>barApp</code> now runs with 2 copies of Forge, that means it will potentially attempt to register 2 different versions of each component in Forge. Remember the browser&#x27;s <code>CustomElementRegistry</code> is effectively a dictionary. So you can’t register two different custom elements under the same key. So what happens is that whatever version registers first “wins”.</p><p>As an example, let’s say <code>forge-selector v2.0.0</code> gets registered first for <code>fooLib</code>. Then later, <code>forge-selector v3.5.0</code> attempts to register for <code>barApp</code>. The key &quot;forge-selector&quot; is already registered, so the second registration attempt fails silently. But now <code>barApp</code> is stuck with <code>forge-selector v2.0.0</code>. Let’s say the newer version of <code>forge-selector</code> had added type-ahead functionality that we’re utilizing in <code>barApp</code>. However, now that the older version registered first, anywhere we’re using that new type-ahead feature is now broken with little to no leads as to what happened.</p><p>Hopefully, that illustrates the reason you wouldn’t ever want to set Forge as a dependency of a package.</p><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="peer-dependencies">Peer dependencies<a class="hash-link" href="#peer-dependencies" title="Direct link to heading">​</a></h2><p>So how do we safely manage Forge versions?</p><p>If you need to create a library that utilizes Forge, declare it as a peer dependency for the reasons mentioned above.</p><p>This means that your new library will need to implement Forge according to the version dictated by your dependent applications.</p><p>Going back to our earlier example involving <code>fooLib</code> and <code>barApp</code>. This time, <code>fooLib</code> declares Forge as a peer dependency.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>In this case, Forge is only included once in the application at <code>v3.5.0</code>. Since it’s included only once (by the application) there are no registration conflicts with any of the custom elements. But now <code>fooLib</code> is using <code>Forge v3.5.0</code> when it was originally implemented using <code>Forge v2.0.0</code>. Obviously, this can still lead to breaking changes in the Forge components since <code>fooLib</code> could be using features that no longer exist in <code>Forge v3.5.0</code>.</p></div></div><p>The solution is that both <code>fooLib</code> and <code>barApp</code> need to be kept within the same major version.</p><p>Forge follows <a href="https://semver.org/" target="_blank" rel="noopener noreferrer">semver</a> versioning practices. So we will not (intentionally) introduce any breaking changes within the same major version of Forge.</p><p>So if <code>fooLib</code> had a <em>peer</em> dependency of <code>Forge v1.0.1</code> and <code>barApp</code> had a dependency of <code>Forge v3.5.0</code>, there would be no breaking changes and both would work as expected.</p><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="in-summary">In summary<a class="hash-link" href="#in-summary" title="Direct link to heading">​</a></h2><ul><li>When possible, avoid including <code>dependencies</code> (of any kind) in your packages.</li><li>Use <code>peerDependencies</code> where it cannot be avoided.</li><li>Always keep your apps and packages within the same major version of Forge.</li></ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/tcw">tcw</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/forge">forge</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/components">components</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/npm">npm</a></li></ul></div><div class="col margin-top--sm"><a href="https://pr.new/github.com/tyler-technologies-oss/forge-design-system/edit/main/blog/2020-05-06-package-dependencies/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2022/05/02/upgrade-guide-forge-2"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Forge 2.0 Upgrade</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#npm-jargon" class="table-of-contents__link toc-highlight">NPM jargon</a></li><li><a href="#custom-elements" class="table-of-contents__link toc-highlight">Custom elements</a></li><li><a href="#what-not-to-do" class="table-of-contents__link toc-highlight">What not to do</a></li><li><a href="#why-its-a-problem" class="table-of-contents__link toc-highlight">Why it’s a problem</a></li></ul></li><li><a href="#peer-dependencies" class="table-of-contents__link toc-highlight">Peer dependencies</a></li><li><a href="#in-summary" class="table-of-contents__link toc-highlight">In summary</a></li></ul></div></div></div></div></div></div>
<script src="/assets/js/runtime~main.31aec36f.js"></script>
<script src="/assets/js/main.bfc6b0e5.js"></script>
</body>
</html>